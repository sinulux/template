(function(b){var c={width:"auto",offsets:{x:0,y:0},zIndex:999,targetMode:"common",target:null,targetAttr:"rel",container:null,reverseSharp:false,position:"4-1",edgeAdjust:false,bindType:null,bindCall:null};b.fn.floatRemove=function(){return b(this).each(function(){if(this.o&&null!=this.o&&this.o.s&&null!=this.o.s){if(this.o.s.container&&null!=this.o.s.container){this.o.s.container.remove()}}if(this.o&&null!=this.o&&this.o.corner&&null!=this.o.corner){this.o.corner.remove()}if(this.o&&null!=this.o){this.o=null}})};b.fn.floatHidden=function(){return b(this).each(function(){if(this.o&&null!=this.o&&this.o.s&&null!=this.o.s){this.o.s.container.hide()}if(this.o&&null!=this.o&&this.o.corner&&null!=this.o.corner){this.o.corner.hide()}})};b.fn.popFloat=function(d){return b(this).each(function(){var e=b.extend({},c,d||{});if(!this.o){this.o=new a();this.o.s=e;this.o.trigger=b(this)}this.o.targetGet();b(document).unbind("mouseup").data("mouseupBind",false)})};var a=function(){this.targetGet=function(){if(!this.trigger){return this}var g=this.trigger.attr(this.s.targetAttr);var f=typeof this.s.target=="function"?this.s.target.call(this.trigger):this.s.target;switch(this.s.targetMode){case"common":if(f){var i=typeof(f);if(i==="object"){if(f.size()){this.target=f.eq(0)}}else{if(i==="string"){if(b(f).size()){this.target=b(f).eq(0)}}}}else{if(g&&b("#"+g).size()){this.target=b("#"+g)}}if(this.target){this.targetShow()}else{return this}break;case"ajax":var d=f||g;if(!d){return}if(!this.cacheData[d]){this.loading()}var h=this;b.ajax({url:d,success:function(m){if(typeof(m)==="string"){h.cacheData[d]=true;h.target=b('<div class="float_ajax_data">'+m+"</div>");h.targetShow()}},error:function(){h.target=b('<div class="float_ajax_error">数据没有加载成功。</div>');h.targetShow()}});break;case"list":var k='<ul class="float_list_ul">',j;if(b.isArray(f)&&(j=f.length)){b.each(f,function(n,p){var o="",r="",q,m;if(n===0){r=' class="float_list_li_first"'}if(n===j-1){r=' class="float_list_li_last"'}if(typeof(p)==="object"&&(q=p.text.toString())){if(m=(p.href||"javascript:")){o='<a href="'+m+'" class="float_list_a">'+q+"</a>"}else{o=q}}else{if(typeof(p)==="string"&&p){o=p}}if(o){k+="<li"+r+">"+o+"</li>"}})}else{k+='<li class="float_list_null">列表无数据。</li>'}k+="</ul>";this.target=b(k);this.targetShow();break;case"remind":var l=f||g;if(typeof(l)==="string"){this.target=b("<span>"+l+"</span>");this.targetShow()}break;default:var e=f||g,i=typeof(e);if(e){if(i==="string"){if(/^.[^:#\[\.,]*$/.test(e)){if(b(e).size()){this.target=b(e).eq(0);this.targetProtect=true}else{if(b("#"+e).size()){this.target=b("#"+e).eq(0);this.targetProtect=true}else{this.target=b("<div>"+e+"</div>");this.targetProtect=false}}}else{this.target=b("<div>"+e+"</div>");this.targetProtect=false}this.targetShow()}else{if(i==="object"){if(!b.isArray(e)&&e.size()){this.target=e.eq(0);this.targetProtect=true;this.targetShow()}}}}}return this};this.container=function(){var d=this.s.container,i=this.s.targetMode||"mode";if(i==="ajax"||i==="remind"){this.s.sharpAngle=true}else{this.s.sharpAngle=false}if(this.s.reverseSharp){this.s.sharpAngle=!this.s.sharpAngle}if(d===null){d="plugin"}if(d=="plugin"){var h=parseInt(Math.random()*10000000+1);var e=b("#floatBox_"+i+h);while(e.length>0){h=parseInt(Math.random()*10000000+1);e=b("#floatBox_"+i+h)}d=b('<div id="floatBox_'+i+h+'" class="float_'+i+'_box"></div>');d.appendTo(b("body")).hide();this.s.container=b("#floatBox_"+i+h);if(null!=this.s.bindType&&null!=null!=this.s.bindCall){var g=this.s.bindCall;var f=this.trigger;this.s.container.bind(this.s.bindType,function(){g(f)})}}if(d&&typeof(d)!=="string"&&d.size()){this.target=d.empty().append(this.target)}return this};this.setWidth=function(){var d=this.s.width;if(d==="auto"){if(this.target.get(0).style.width){this.target.css("width","auto")}}else{if(d==="inherit"){this.target.width(this.trigger.width())}else{this.target.css("width",d)}}return this};this.position=function(){if(!this.trigger||!this.target){return this}var h,x=0,k=0,m=0,y=0,s,o,e,E,u,q,f=this.target.data("height"),C=this.target.data("width"),r=b(window).scrollTop(),B=parseInt(this.s.offsets.x,10)||0,A=parseInt(this.s.offsets.y,10)||0,w=this.cacheData;if(!f){f=this.target.outerHeight()}if(!C){C=this.target.outerWidth()}h=this.trigger.offset();x=this.trigger.outerHeight();k=this.trigger.outerWidth();s=h.left;o=h.top;var l=function(){if(s<0){s=0}else{if(s+x>b(window).width()){s=b(window).width()-k}}},i=function(){if(o<0){o=0}else{if(o+x>b(document).height()){o=b(document).height()-x}}};var g=["4-1","1-4","5-7","2-3","2-1","6-8","3-4","4-3","8-6","1-2","7-5","3-2"],v=this.s.position,d=false,j;b.each(g,function(F,G){if(G===v){d=true;return}});if(!d){v="4-1"}var D=function(F){var G="bottom";switch(F){case"1-4":case"5-7":case"2-3":G="top";break;case"2-1":case"6-8":case"3-4":G="right";break;case"1-2":case"8-6":case"4-3":G="left";break;case"4-1":case"7-5":case"3-2":G="bottom";break}return G};var n=function(F){if(F==="5-7"||F==="6-8"||F==="8-6"||F==="7-5"){return true
}return false};var t=function(H){var I=0,F=0,G=(this.s.sharpAngle&&this.corner)?true:false;if(H==="right"){F=s+k+C+B;if(G){F+=this.corner.width()}if(F>b(window).width()){return false}}else{if(H==="bottom"){I=o+x+f+A;if(G){I+=this.corner.height()}if(I>r+b(window).height()){return false}}else{if(H==="top"){I=f+A;if(G){I+=this.corner.height()}if(I>o-r){return false}}else{if(H==="left"){F=C+B;if(G){F+=this.corner.width()}if(F>s){return false}}}}}return true};j=D(v);if(this.s.sharpAngle){this.createSharp(j)}if(this.s.edgeAdjust){if(t.call(this,j)){(function(I){if(n(v)){return}var G={top:{right:"2-3",left:"1-4"},right:{top:"2-1",bottom:"3-4"},bottom:{right:"3-2",left:"4-1"},left:{top:"1-2",bottom:"4-3"}};var H=G[j],F;if(H){for(F in H){if(!t.call(I,F)){v=H[F]}}}})(this)}else{(function(J){if(n(v)){var G={"5-7":"7-5","7-5":"5-7","6-8":"8-6","8-6":"6-8"};v=G[v]}else{var H={top:{left:"3-2",right:"4-1"},right:{bottom:"1-2",top:"4-3"},bottom:{left:"2-3",right:"1-4"},left:{bottom:"2-1",top:"3-4"}};var I=H[j],F=[];for(name in I){F.push(name)}if(t.call(J,F[0])||!t.call(J,F[1])){v=I[F[0]]}else{v=I[F[1]]}}})(this)}}var z=D(v),p=v.split("-")[0];if(this.s.sharpAngle){this.createSharp(z);m=this.corner.width(),y=this.corner.height()}switch(z){case"top":E=o-A-f-y;if(p=="1"){e=s-B}else{if(p==="5"){e=s-(C-k)/2-B}else{e=s-(C-k)-B}}q=o-y-A-1;u=s-(m-k)/2;break;case"right":e=s+k+B+m;if(p=="2"){E=o+A}else{if(p==="6"){E=o-(f-x)/2+A}else{E=o-(f-x)+A}}u=s+k+B+1;q=o-(y-x)/2;break;case"bottom":E=o+x+A+y;if(p=="4"){e=s+B}else{if(p==="7"){e=s-(C-k)/2+B}else{e=s-(C-k)+B}}q=o+x+A+1;u=s-(m-k)/2;break;case"left":e=s-C-B-m;if(p=="2"){E=o-A}else{if(p==="6"){E=o-(C-k)/2-A}else{E=o-(f-x)-A}}u=e+m;q=o-(C-m)/2;break}this.target.css({position:"absolute",left:e,top:E,zIndex:this.s.zIndex});C=this.target.outerWidth();cor_w_t=this.corner.outerWidth();switch(z){case"top":if(y&&m&&this.corner){this.corner.css({left:e+C/2-cor_w_t/2,top:q,zIndex:this.s.zIndex+1})}break;case"bottom":if(y&&m&&this.corner){this.corner.css({left:e+C/2-cor_w_t/2,top:q,zIndex:this.s.zIndex+1})}break;default:if(y&&m&&this.corner){this.corner.css({left:u,top:q,zIndex:this.s.zIndex+1})}}return this};this.createSharp=function(f){var j,k,m="",l="";var d={left:"right",right:"left",bottom:"top",top:"bottom"},g=d[f]||"top";if(this.target){j=this.target.css("background-color");if(parseInt(this.target.css("border-"+g+"-width"))>0){k=this.target.css("border-"+g+"-color")}if(k&&k!=="transparent"){m='style="color:'+k+';"'}else{m='style="display:none;"'}if(j&&j!=="transparent"){l='style="color:'+j+';"'}else{l='style="display:none;"'}}if(!this.corner||null==this.corner){var e=parseInt(Math.random()*10000000+1);var i=b("#floatCorner_"+f+e);while(i.length>0){e=parseInt(Math.random()*10000000+1);i=b("#floatCorner_"+f+e)}var h='<div id="floatCorner_'+f+e+'" class="float_corner float_corner_'+f+'">'+'<span class="corner corner_1" '+m+">◆</span>"+'<span class="corner corner_2" '+l+">◆</span>"+"</div>";b("body").append(b(h));this.corner=b("#floatCorner_"+f+e)}return this};this.loading=function(){this.target=b('<div class="float_loading"></div>');this.targetShow();this.target.removeData("width").removeData("height");return this};this.targetShow=function(){this.container().setWidth().position();this.target.show();if(this.corner){this.corner.show()}return this};this.target=null;this.trigger=null;this.s={};this.cacheData={}};b.popFloat={}})(jQuery);